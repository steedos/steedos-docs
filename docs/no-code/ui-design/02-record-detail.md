# 记录详情页视图

:::info 学习目标
* 理解默认详情页与自定义页面的区别。
* 学会使用 **页面设计器** 拖拽调整页面布局。
* 掌握如何将页面分栏、分组和使用选项卡 (Tabs)。
* **进阶**：设置字段的动态显示逻辑（例如：只有审核不通过时，才显示“驳回原因”）。
:::

## 什么是记录详情页？

当用户在列表中点击某一行数据（例如点击一个“合同名称”）时，打开的页面就是 **记录详情页**。

它通常包含三个核心部分：
1.  **头部 (Header)**：显示标题和关键操作按钮（编辑、删除、提交审批）。
2.  **详细信息 (Details)**：展示该记录的所有字段内容。
3.  **相关子表 (Related Lists)**：展示关联的子数据（例如：合同下的付款记录）。

### 默认视图 vs. 自定义视图
* **默认视图**：系统根据对象字段自动生成的一列到底的表单。简单，但当字段超过 20 个时，用户需要疯狂滚轮才能找到数据。
* **自定义视图**：通过 Amis 设计器，你可以将页面设计成双栏、三栏，或者把不常用的信息折叠在标签页里，像设计 PPT 一样美化界面。

---

## 认识 Steedos 页面设计器

Steedos 的界面引擎基于百度的开源框架 **Amis**。你可以通过可视化编辑器，所见即所得地修改页面。

![amis设计器](/img/amis/amis-designer.png)

### 如何进入设计模式？
1.  打开任意一个记录详情页（例如打开某个具体的“项目”）。
2.  点击右上角的 **设置 (齿轮图标)** -> **“编辑页面 (Edit Page)”**。
3.  此时，系统会进入全屏的设计器模式。

### 设计器界面概览


* **左侧：组件库 (Components)**
    这里是你的“积木箱”。包含了布局容器（分栏、选项卡）、字段组件（输入框、文本）、展示组件（表格、卡片）等。
* **中间：画布 (Canvas)**
    这是你的“工作台”。你可以把左侧的组件拖拽到这里。
* **右侧：属性面板 (Properties)**
    这是“控制台”。选中画布上的某个组件，在这里修改它的标题、颜色、隐藏条件等。

---

## 核心组件详解

在设计详情页时，以下几个组件是最常用的：

### 1. 对象表单 (Object Form)
这是最基本的单元。它会自动选中的对象展示对应的表单。
* **技巧**：在属性面板中，你可以选择对象，还可以指定只显示部分字段。

### 2. 相关列表 (Related List) / 子表
类似于 Salesforce 的 Related List。用于展示与当前记录关联的子数据。
* **配置**：拖入组件后，在属性中选择 **“关联对象”**（例如：在项目页选择关联的“任务”）。
* **展示模式**：可以选择以 **表格** 展示，或者 **卡片** 展示。

---

## 进阶：动态显隐规则 (Visible On)

这是低代码设计中最“智能”的部分。我们不需要写代码，就能实现复杂的交互逻辑。

**场景**：只有当“项目状态”变为“暂停”时，才显示“暂停原因”这个输入框。

1.  在画布上选中 **“暂停原因”** 字段组件。
2.  在右侧属性面板中，找到 **“显隐 (Visible)”** 或 **“显示条件 (Visible On)”** 设置项。
3.  点击 **“表达式配置”**（或者直接输入公式）。
4.  编写逻辑：
    * 如果状态字段的 API 名称是 `status`，暂停的值是 `paused`。
    * 表达式为：`this.status === 'paused'`
5.  **效果**：当用户把状态选为“暂停”时，原因框瞬间出现；选其他状态时，该框自动消失。

:::tip Amis 表达式小贴士
* `this.xxx` 代表当前表单的字段。
* `===` 表示等于，`!==` 表示不等于。
* `&&` 表示并且，`||` 表示或者。
* 示例：`this.amount > 10000` (金额大于一万时才显示)。
:::

---

## 常见问题 (FAQ)

**Q: 我把页面改乱了，能恢复默认吗？**
A: 可以。在页面设置中，通常有 **“重置为默认 (Reset to Default)”** 的选项。或者你可以删除自定义的布局配置。

**Q: 为什么我有两个不同的“详情页”？**
A: Steedos 支持 **“基于简档的页面分配 (Profile-based Layouts)”**。
* 你可以为“销售人员”设计一个只显示销售信息的页面。
* 同时为“财务人员”设计一个显示成本和利润的页面。
* 在页面保存时，系统会询问你应用于哪些简档（Profile）。

**Q: 编辑模式 (Edit) 和 查看模式 (View) 是分开设计的吗？**
A: 在 Steedos 中，默认情况下它们是**共用一套布局**的。表单组件会自动根据状态切换为“输入框”或“纯文本”。但你也可以通过设置组件的 `hiddenOn` 属性，专门指定某些内容只在查看时显示，或只在编辑时显示。
