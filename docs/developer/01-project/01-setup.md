
# åˆå§‹åŒ–é¡¹ç›®

:::info å­¦ä¹ ç›®æ ‡

  * å‡†å¤‡ Node.js å¼€å‘ç¯å¢ƒ (v22)ã€‚
  * ä½¿ç”¨è„šæ‰‹æ¶ (`create-steedos-app`) åˆå§‹åŒ–é¡¹ç›®ã€‚
  * **æ ¸å¿ƒæŠ€èƒ½**ï¼šç†è§£åŸºäº Workspaces çš„é¡¹ç›®ç›®å½•ç»“æ„ã€‚
  * **æ ¸å¿ƒæŠ€èƒ½**ï¼šæŒæ¡ä½¿ç”¨ Yarn è„šæœ¬å¯åŠ¨æ•°æ®åº“å’ŒæœåŠ¡çš„æµç¨‹ã€‚
:::

Steedos 3.0 é‡‡ç”¨æ ‡å‡†çš„ Node.js å¾®æœåŠ¡æ¶æ„ï¼Œé¡¹ç›®ç»“æ„æ¸…æ™°ï¼Œå†…ç½®äº†å®Œæ•´çš„è¿è¡Œç¯å¢ƒã€‚

## 1\. åŸºç¡€ç¯å¢ƒå‡†å¤‡ (Prerequisites)

åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç”µè„‘ï¼ˆWindows/Mac/Linuxï¼‰å·²å®‰è£…ä»¥ä¸‹è½¯ä»¶ï¼š

### Node.js & Yarn

Steedos ä¾èµ– Node.js è¿è¡Œã€‚

  * **Node.js**: æ¨èç‰ˆæœ¬ **v22 LTS**ã€‚
      * [ä¸‹è½½ Node.js](https://nodejs.org/)
  * **Yarn**: é¡¹ç›®ä¾èµ– Yarn Workspaces ç®¡ç†å¤šè½¯ä»¶åŒ…ï¼Œ**å¿…é¡»å®‰è£… Yarn**ã€‚
    ```bash
    npm install -g yarn
    ```

### æ•°æ®åº“æœåŠ¡ (Docker)

Steedos éœ€è¦ MongoDB å­˜å‚¨æ•°æ®ï¼ŒRedis å­˜å‚¨ç¼“å­˜ã€‚
æ‚¨å¯ä»¥åœ¨æœ¬æœºç›´æ¥å®‰è£…è¿™äº›æ•°æ®åº“è½¯ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ **Docker** è¿è¡Œå®ƒä»¬ã€‚

  * [ä¸‹è½½ Docker Desktop](https://www.docker.com/products/docker-desktop)

-----

## 2\. å¼€å‘å·¥å…· (VS Code)

Visual Studio Code æ˜¯å¼€å‘ Steedos é¡¹ç›®çš„æœ€ä½³ä¼´ä¾£ã€‚

### æ¨èæ’ä»¶

ä¸ºäº†è·å¾—æœ€ä½³çš„å¼€å‘ä½“éªŒï¼ˆè¯­æ³•é«˜äº®ã€ä»£ç è¡¥å…¨ï¼‰ï¼Œå»ºè®®å®‰è£…ï¼š

1.  **ESLint & Prettier**: ä¿è¯ä»£ç æ ¼å¼è§„èŒƒã€‚
2.  **Steedos Extensions**: (å®˜æ–¹æ’ä»¶) æä¾›å…ƒæ•°æ®ä»£ç è¡¥å…¨å’Œå¯è§†åŒ–åŒæ­¥åŠŸèƒ½ã€‚

-----

## 3\. åˆå§‹åŒ–é¡¹ç›® (Scaffolding)

æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè„šæ‰‹æ¶å·¥å…·ï¼Œåªéœ€ä¸€è¡Œå‘½ä»¤å³å¯ç”Ÿæˆæ ‡å‡†çš„å·¥ç¨‹ç›®å½•ã€‚

### ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºé¡¹ç›®

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```bash
npx create-steedos-app my-steedos-project
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–

è¿›å…¥é¡¹ç›®ç›®å½•å¹¶å®‰è£…ä¾èµ–åŒ…ã€‚ç”±äºä½¿ç”¨äº† Workspacesï¼Œè¿™ä¸€æ­¥ä¼šåŒæ—¶å®‰è£…ä¸»é¡¹ç›®å’Œæ‰€æœ‰å­è½¯ä»¶åŒ…çš„ä¾èµ–ã€‚

```bash
cd my-steedos-project
yarn install
```

-----

## 4\. ç›®å½•ç»“æ„è¯¦è§£ (Anatomy)

ç”Ÿæˆçš„é¡¹ç›®æ˜¯ä¸€ä¸ª **Monorepo (å•ä½“ä»“åº“)** ç»“æ„ï¼Œæ ¸å¿ƒé€»è¾‘ä½äº `steedos-packages` ç›®å½•ä¸‹ï¼š

```text
my-steedos-project/
â”œâ”€â”€ .vscode/               # VS Code æ¨èé…ç½®
â”œâ”€â”€ steedos-packages/      # [æ ¸å¿ƒ] å·¥ä½œåŒºç›®å½•ï¼Œå­˜æ”¾æ‰€æœ‰çš„ä¸šåŠ¡è½¯ä»¶åŒ…
â”‚   â””â”€â”€ example-app/       # ç¤ºä¾‹ä¸šåŠ¡åŒ… (ä½ å¯ä»¥å¤åˆ¶å®ƒåˆ›å»ºæ–°åŒ…)
â”‚       â”œâ”€â”€ package.json   # å®šä¹‰åŒ…åå’Œä¾èµ–
â”‚       â””â”€â”€ main/
â”‚           â””â”€â”€ default/
â”‚               â”œâ”€â”€ objects/   # å¯¹è±¡å®šä¹‰ (.object.yml)
â”‚               â”œâ”€â”€ triggers/  # åç«¯è§¦å‘å™¨ä»£ç  (.js)
â”‚               â””â”€â”€ apps/      # åº”ç”¨èœå•å®šä¹‰ (.app.yml)
â”œâ”€â”€ services/              # å¾®æœåŠ¡é…ç½® (moleculer.config.js)
â”œâ”€â”€ steedos-config.yml     # ç³»ç»Ÿä¸»é…ç½®æ–‡ä»¶ (æ•°æ®åº“é“¾æ¥ã€ç«¯å£ç­‰)
â”œâ”€â”€ package.json           # é¡¹ç›®ä¸»æ–‡ä»¶ï¼Œå®šä¹‰äº†å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker-compose.yml     # æ•°æ®åº“ç¼–æ’æ–‡ä»¶
â””â”€â”€ .gitignore
```

:::tip å¼€å‘æŒ‡å—
**ä½ çš„ä»£ç åº”è¯¥å†™åœ¨å“ªé‡Œï¼Ÿ**
è¯·åœ¨ `steedos-packages/` ç›®å½•ä¸‹å·¥ä½œã€‚

  * Steedos å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ‰«æè¯¥ç›®å½•ä¸‹æ‰€æœ‰å£°æ˜ä¸º `steedos-package` çš„å­æ–‡ä»¶å¤¹ã€‚
  * ä½ å¯ä»¥åœ¨è¿™é‡Œåˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹ï¼ˆå¦‚ `finance-pkg`, `hr-pkg`ï¼‰æ¥éš”ç¦»ä¸åŒçš„ä¸šåŠ¡æ¨¡å—ã€‚
:::

-----

## 5\. å¯åŠ¨å¼€å‘æœåŠ¡ (Run & Debug)

æˆ‘ä»¬åœ¨ `package.json` ä¸­å†…ç½®äº†å¿«æ·å‘½ä»¤ï¼Œä½ ä¸éœ€è¦è®°å¿†å¤æ‚çš„ Docker æŒ‡ä»¤ã€‚

### ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨æ•°æ®åº“

é¡¹ç›®å†…ç½®äº† `start:db` è„šæœ¬ï¼Œå®ƒä¼šè‡ªåŠ¨è°ƒç”¨ Docker Compose å¯åŠ¨ MongoDB å’Œ Redisã€‚

```bash
yarn start:db
```

*(æ³¨æ„ï¼šè¯·ç¡®ä¿ Docker Desktop å·²å¯åŠ¨ã€‚æ­¤å‘½ä»¤ä¼šå ç”¨æœ¬æœºçš„ 27017 å’Œ 6379 ç«¯å£)*

### ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ Steedos æœåŠ¡

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ä¸»ç¨‹åºï¼ˆåŸºäº `@steedos/server`ï¼‰ï¼š

```bash
yarn start
```

å½“ç»ˆç«¯çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—æ—¶ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼š

> ğŸš€ Application is running on: http://localhost:5100

### ç¬¬ä¸‰æ­¥ï¼šè®¿é—®ç³»ç»Ÿ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š

**`http://localhost:5100`**

*(æ³¨ï¼šé»˜è®¤ç«¯å£é€šå¸¸ä¸º 5100ï¼Œå…·ä½“è¯·ä»¥æ§åˆ¶å°æ‰“å°çš„æ—¥å¿—ä¸ºå‡†ã€‚)*

-----

## 6\. ç‰ˆæœ¬æ§åˆ¶ (Git)

### åº”è¯¥æäº¤ä»€ä¹ˆï¼Ÿ(Commit)

  * `steedos-packages/` ä¸‹çš„æ‰€æœ‰ä¸šåŠ¡ä»£ç  (.yml, .js)ã€‚
  * `package.json` å’Œ `yarn.lock`ã€‚

### ä¸åº”è¯¥æäº¤ä»€ä¹ˆï¼Ÿ(Ignore)

  * `node_modules/`
  * `.steedos/` (ç³»ç»Ÿè¿è¡Œæ—¶ç”Ÿæˆçš„ä¸´æ—¶ç¼“å­˜ï¼Œ**ç»å¯¹ä¸è¦æäº¤**)
  * `steedos-storage/` (æœ¬åœ°ä¸Šä¼ çš„é™„ä»¶)

-----

## å¸¸è§é—®é¢˜ (FAQ)

**Q: `yarn install` æŠ¥é”™ï¼Ÿ**
A: è¯·æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ä¸º v18 æˆ– v22ã€‚

**Q: `yarn start:db` æ²¡ååº”ï¼Ÿ**
A: è¯·ç¡®è®¤ Docker Desktop æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œ `docker-compose up -d` æ¥æ’æŸ¥è¯¦ç»†é”™è¯¯ã€‚

**Q: ä¸ºä»€ä¹ˆæˆ‘ä¿®æ”¹äº† `package.json` é‡Œçš„ä¾èµ–ï¼Œä»£ç é‡Œå¼•ç”¨ä¸åˆ°ï¼Ÿ**
A: åœ¨ Workspaces æ¨¡å¼ä¸‹ï¼Œå¦‚æœä½ æ˜¯åœ¨ `steedos-packages/my-app` é‡Œä½¿ç”¨ä¾èµ–ï¼Œå»ºè®®è¿›å…¥è¯¥ç›®å½•æ‰§è¡Œ `yarn add xxx`ï¼Œæˆ–è€…åœ¨æ ¹ç›®å½•ä½¿ç”¨ `yarn workspace @my-app/name add xxx`ã€‚